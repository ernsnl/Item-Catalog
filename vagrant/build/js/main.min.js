function connect(a){"facebook"==a&&handleFacebook()}function handleFacebook(){FB.getLoginStatus(function(a){console.log(a),"connected"!=a.status&&FB.login(function(a){console.log(a),"connected"===a.status?FB.api("/"+a.authResponse.userID+"?fields=id,name,email,picture.width(200).height(200)",function(a){console.log(a),a&&!a.error&&sendlogininfo("facebook",a.name,a.email,a.picture.data.url)}):"not_authorized"===a.status&&alert("You did not authorize our app. :(")},{scope:"public_profile,email"})})}function renderButton(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"781690799289-2q0asjktodv4j1nlf5vu6mu34cr1h7i2.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),attachSignin(attachSignin(document.getElementById("google-signin")))})}function attachSignin(a){auth2.attachClickHandler(a,{},function(a){var b=a.getBasicProfile();sendlogininfo("google",b.getName(),b.getEmail(),b.getImageUrl())},function(a){console.log(a)})}function sendlogininfo(a,b,c,d){$.ajax({url:"/connect",dataType:"text",data:{type:a,name:b,email:c,picture_url:d,CSRFToken:$("#CSRFToken").val()},beforeSend:function(){console.log("Disable other sign in links.")},error:function(a){alert("Something went wrong! :(")},method:"GET",success:function(a){"OK"==a?($(".transition-filter").removeClass("hidden"),document.location.reload()):alert("Something went wrong!")}})}function disconnect(a){$.ajax({url:"/disconnect",dataType:"text",data:{CSRFToken:$("#CSRFToken").val()},error:function(a){alert("Something went wrong! :(")},method:"GET",success:function(b){if("OK"==b){if("google"==a){var c=gapi.auth2.getAuthInstance();c.signOut().then(function(){console.log("User signed out.")})}$(".transition-filter").removeClass("hidden"),document.location.reload()}}})}